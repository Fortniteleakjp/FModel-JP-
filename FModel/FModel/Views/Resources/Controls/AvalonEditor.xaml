<UserControl x:Class="FModel.Views.Resources.Controls.AvalonEditor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
             xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
             xmlns:controls="clr-namespace:FModel.Views.Resources.Controls"
             xmlns:viewModels="clr-namespace:FModel.ViewModels"
             mc:Ignorable="d" d:DataContext="{d:DesignInstance viewModels:TabItem}">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <DockPanel>
        <controls:AvalonSearchbar TargetEditor="{Binding ElementName=MyAvalonEditor}"
                                  Visibility="{Binding HasSearchOpen, Converter={StaticResource BoolToVisibilityConverter}}"
                                  DockPanel.Dock="Bottom"/>

        <DockPanel DockPanel.Dock="Top" Margin="0,0,0,4"
                   Visibility="{Binding Highlighter.Name, Converter={StaticResource StringToVisibilityConverter}, ConverterParameter=JSON}">
            <Button Content="クリア" DockPanel.Dock="Right" Margin="4,0,0,0" Click="OnClearJsonFilterClick"/>
            <TextBox Text="{Binding JsonFilterText, UpdateSourceTrigger=PropertyChanged}"
                     KeyDown="OnJsonFilterKeyDown"
                     controls:HintTextBox.Hint="非表示にする文字列を入力..."/>
        </DockPanel>

        <avalonEdit:TextEditor x:Name="MyAvalonEditor" SyntaxHighlighting="{Binding Highlighter}" Document="{Binding Document}"
                               FontFamily="Consolas" FontSize="{Binding FontSize}" IsReadOnly="True" ShowLineNumbers="True" Foreground="#DAE5F2"
                               Background="{DynamicResource {x:Static adonisUi:Brushes.Layer3BackgroundBrush}}" PreviewMouseWheel="OnPreviewMouseWheel"
                               TextChanged="OnTextChanged" MouseHover="OnMouseHover" MouseHoverStopped="OnMouseHoverStopped" PreviewMouseUp="OnMouseRelease" />
    </DockPanel>
</UserControl>
