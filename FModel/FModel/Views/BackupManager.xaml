<adonisControls:AdonisWindow x:Class="FModel.Views.BackupManager"
                             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                             xmlns:converters="clr-namespace:FModel.Views.Resources.Converters"
                             xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
                             xmlns:adonisControls="clr-namespace:AdonisUI.Controls;assembly=AdonisUI"
                             xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
                             WindowStartupLocation="CenterScreen"
                             ResizeMode="CanResize"
                             IconVisibility="Collapsed"
                             SizeToContent="Height"
                             Loaded="OnLoaded"
                             Width="{Binding Source={x:Static SystemParameters.MaximizedPrimaryScreenWidth}, Converter={converters:RatioConverter}, ConverterParameter='0.225'}" Height="433">
    <adonisControls:AdonisWindow.Style>
        <Style TargetType="adonisControls:AdonisWindow"
               BasedOn="{StaticResource {x:Type adonisControls:AdonisWindow}}">
            <Setter Property="Title"
                    Value="{DynamicResource Backup_Title}" />
        </Style>
    </adonisControls:AdonisWindow.Style>
    <adonisControls:AdonisWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Resources.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </adonisControls:AdonisWindow.Resources>
    <Grid Column="2"
          adonisExtensions:LayerExtension.Layer="2"
          Margin="10"
          Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="10" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="10" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="10" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0"
                   Grid.Column="0"
                   Grid.ColumnSpan="3"
                   TextAlignment="Center"
                   TextWrapping="Wrap"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   FontSize="12">
            <Run Text="{DynamicResource Backup_Desc_Intro}" />
            <LineBreak /><LineBreak />
            <Run FontWeight="Bold" Text="{DynamicResource Backup_Desc_Small_Title}" />
            <Run Text="{DynamicResource Backup_Desc_Small_Detail}" />
            <LineBreak /><LineBreak />
            <Run FontWeight="Bold" Text="{DynamicResource Backup_Desc_Large_Title}" />
            <Run Text="{DynamicResource Backup_Desc_Large_Detail}" />
        </TextBlock>

        <Grid Grid.Row="2"
              Grid.Column="0"
              Grid.ColumnSpan="3"
              Margin="0,5,0,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Button Click="OnCreateBackupClick"
                    Grid.Column="0"
                    Cursor="Hand"
                    Style="{DynamicResource {x:Static adonisUi:Styles.AccentButton}}"
                    Content="{DynamicResource Backup_Btn_CreateSmall}"
                    Margin="4,0"
                    Padding="10,5"
                    IsEnabled="{Binding IsCreatingBackup, Converter={x:Static converters:InvertBooleanConverter.Instance}}" />
            <Button Click="OnCreateBackupHeavyClick"
                    Grid.Column="1"
                    Cursor="Hand"
                    Style="{StaticResource OrangeAccentButton}"
                    Content="{DynamicResource Backup_Btn_CreateLarge}"
                    Margin="4,0"
                    Padding="10,5"
                    Background="#FFF9A000"
                    IsEnabled="{Binding IsCreatingBackup, Converter={x:Static converters:InvertBooleanConverter.Instance}}" />
        </Grid>

        <Button Grid.Row="3"
                Grid.Column="0" Grid.ColumnSpan="3"
                Cursor="Hand"
                Style="{DynamicResource {x:Static adonisUi:Styles.AccentButton}}"
                Content="pakの比較ファイルを保存 (.loli)"
                Margin="9,7,-1,0"
                Padding="10,5"
                Command="{Binding CreateLoliBackupCommand}"
                IsEnabled="{Binding IsCreatingBackup, Converter={x:Static converters:InvertBooleanConverter.Instance}}" Click="Button_Click" Grid.RowSpan="3" />

        <Separator Grid.Row="5"
                   Grid.Column="0"
                   Grid.ColumnSpan="3"
                   Style="{StaticResource CustomSeparator}"
                   Tag="{DynamicResource Backup_Sep_CloudSmall}" />
        <ComboBox Grid.Row="6"
                  Grid.Column="1"
                  ItemsSource="{Binding BackupsView}"
                  SelectedItem="{Binding SelectedBackup, Mode=TwoWay}" Margin="5,12,-5,19" Grid.RowSpan="4" Grid.ColumnSpan="2">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding FileName}"
                               TextTrimming="CharacterEllipsis" />
                </DataTemplate>
            </ComboBox.ItemTemplate>
            <ComboBox.Style>
                <Style TargetType="ComboBox"
                       BasedOn="{StaticResource {x:Type ComboBox}}">
                    <Setter Property="IsEnabled"
                            Value="True" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding BackupsView.Count}"
                                     Value="0">
                            <Setter Property="IsEnabled"
                                    Value="False" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ComboBox.Style>
        </ComboBox>
        <Button
                Grid.Column="1"
                Content="{DynamicResource Backup_Btn_Download}"
                Click="OnDownloadClick" Margin="5,30,-5,30" Grid.Row="9" Grid.ColumnSpan="2" Grid.RowSpan="3">
            <Button.Style>
                <Style TargetType="Button"
                       BasedOn="{StaticResource {x:Type Button}}">
                    <Setter Property="IsEnabled"
                            Value="True" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding BackupsView.Count}"
                                     Value="0">
                            <Setter Property="IsEnabled"
                                    Value="False" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>

        <Separator Grid.Row="11"
                   Grid.Column="0"
                   Style="{StaticResource CustomSeparator}"
                   Tag="{DynamicResource Backup_Sep_CloudLarge}" Grid.ColumnSpan="3" Margin="5,25,-5,3" Grid.RowSpan="2" />

        <ComboBox Grid.Row="12"
                  Grid.Column="0"
                  Grid.ColumnSpan="3"
                  ItemsSource="{Binding BigBackupsView}"
                  SelectedItem="{Binding SelectedBigBackup, Mode=TwoWay}"
                  Margin="5,14,-5,-36">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Key}"
                               TextTrimming="CharacterEllipsis" />
                </DataTemplate>
            </ComboBox.ItemTemplate>
            <ComboBox.Style>
                <Style TargetType="ComboBox"
                       BasedOn="{StaticResource {x:Type ComboBox}}">
                    <Setter Property="IsEnabled"
                            Value="True" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding BigBackupsView.Count}"
                                     Value="0">
                            <Setter Property="IsEnabled"
                                    Value="False" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ComboBox.Style>
        </ComboBox>

        <Button Grid.Row="12"
                Grid.Column="1"
                Content="{DynamicResource Backup_Btn_DownloadLarge}"
                Click="OnDownloadBigBackupClick" Margin="5,43,-5,-69" Grid.ColumnSpan="2">
            <Button.Style>
                <Style TargetType="Button"
                       BasedOn="{StaticResource {x:Type Button}}">
                    <Setter Property="IsEnabled"
                            Value="True" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding BigBackupsView.Count}"
                                     Value="0">
                            <Setter Property="IsEnabled"
                                    Value="False" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
    </Grid>
</adonisControls:AdonisWindow>
