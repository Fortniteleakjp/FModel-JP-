<adonisControls:AdonisWindow x:Class="FModel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:FModel"
        xmlns:controls="clr-namespace:FModel.Views.Resources.Controls"
        xmlns:views="clr-namespace:FModel.Views"
        xmlns:converters="clr-namespace:FModel.Views.Resources.Converters"
        xmlns:settings="clr-namespace:FModel.Settings"
        xmlns:services="clr-namespace:FModel.Services"
        xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
        xmlns:adonisControls="clr-namespace:AdonisUI.Controls;assembly=AdonisUI"
        xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
        xmlns:vm="clr-namespace:FModel.ViewModels"
        xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit"
        xmlns:document="clr-namespace:ICSharpCode.AvalonEdit.Document;assembly=ICSharpCode.AvalonEdit"
        WindowStartupLocation="CenterScreen" Closing="OnClosing" Loaded="OnLoaded" PreviewKeyDown="OnWindowKeyDown"
        Height="{Binding Source={x:Static SystemParameters.MaximizedPrimaryScreenHeight}, Converter={converters:RatioConverter}, ConverterParameter='0.85'}"
        Width="{Binding Source={x:Static SystemParameters.MaximizedPrimaryScreenWidth}, Converter={converters:RatioConverter}, ConverterParameter='0.75'}">
    <adonisControls:AdonisWindow.Style>
        <Style TargetType="adonisControls:AdonisWindow" BasedOn="{StaticResource {x:Type adonisControls:AdonisWindow}}" >
            <Setter Property="Title" Value="{Binding DataContext.InitialWindowTitle, RelativeSource={RelativeSource Self}}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding DataContext.TitleExtra, RelativeSource={RelativeSource Self}, Converter={x:Static converters:IsNullToBoolReversedConverter.Instance}}" Value="True">
                    <Setter Property="Title">
                        <Setter.Value>
                            <MultiBinding StringFormat="{}{0} - {1} {2}">
                                <Binding Path="DataContext.InitialWindowTitle" RelativeSource="{RelativeSource Self}" />
                                <Binding Path="DataContext.GameDisplayName" RelativeSource="{RelativeSource Self}" />
                                <Binding Path="DataContext.TitleExtra" RelativeSource="{RelativeSource Self}" />
                            </MultiBinding>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </adonisControls:AdonisWindow.Style>
    <adonisControls:AdonisWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Views/Resources/Resources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </adonisControls:AdonisWindow.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="{adonisUi:Space 1}" />
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Menu Grid.Row="0">
            <MenuItem Header="{DynamicResource Menu_Directory}">
                <MenuItem Header="{DynamicResource Menu_Directory_Selector}" Command="{Binding MenuCommand}" CommandParameter="Directory_Selector">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource DirectoryIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_Directory_AES}" Command="{Binding MenuCommand}" CommandParameter="Directory_AES" IsEnabled="{Binding Status.IsReady}">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource KeyIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_Directory_Backup}" Command="{Binding MenuCommand}" CommandParameter="Directory_Backup" IsEnabled="{Binding Status.IsReady}">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource BackupIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_Directory_ArchivesInfo}" Command="{Binding MenuCommand}" CommandParameter="Directory_ArchivesInfo" IsEnabled="{Binding Status.IsReady}">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_Directory_ComparePak}" Command="{Binding CUE4Parse.ComparePakCommand}" IsEnabled="{Binding Status.IsReady}">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource DiffIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{DynamicResource Menu_Package}">
                <MenuItem Header="{DynamicResource Menu_Package_Search}" IsEnabled="{Binding Status.IsReady}" InputGestureText="Ctrl+Shift+F" Click="OnSearchViewClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SearchIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_Package_ContentSearch}" IsEnabled="{Binding Status.IsReady}" Click="OnContentSearchViewClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SearchIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_Package_Favorites}" ItemsSource="{Binding CustomDirectories.Directories}" IsEnabled="{Binding Status.IsReady}">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource DirectoriesIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="{DynamicResource Menu_Package_AutoOpenSounds}" IsCheckable="True" StaysOpenOnClick="True"
                          IsChecked="{Binding IsAutoOpenSounds, Source={x:Static settings:UserSettings.Default}}" />
                <Separator />
                <MenuItem Header="{DynamicResource Menu_Package_RecentFiles}" x:Name="RecentFilesMenuItem">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource NoteIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                    <MenuItem Header="{DynamicResource Menu_Package_ClearRecentFiles}" Command="{Binding DataContext.ClearRecentFilesCommand, RelativeSource={RelativeSource AncestorType=adonisControls:AdonisWindow}}">
                        <MenuItem.Icon>
                            <Viewbox Width="16" Height="16">
                                <Canvas Width="24" Height="24">
                                    <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource TrashIcon}" />
                                </Canvas>
                            </Viewbox>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{DynamicResource Menu_View}">
                <MenuItem Header="{DynamicResource Menu_View_3dViewer}" Command="{Binding MenuCommand}" CommandParameter="Views_3dViewer">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource MeshIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_View_AudioPlayer}" Command="{Binding MenuCommand}" CommandParameter="Views_AudioPlayer">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource AudioIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_View_ImageMerger}" Command="{Binding MenuCommand}" CommandParameter="Views_ImageMerger">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource ImageMergerIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>

            </MenuItem>
            <MenuItem Header="{DynamicResource Menu_Profile}" IsEnabled="{Binding Status.IsReady}">
                <MenuItem Header="{DynamicResource Menu_Profile_AllCosmetics}" Command="{Binding MenuCommand}" CommandParameter="Athena_AllCosmetics" Click="OnAthenaAllCosmeticsClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource Menu_Profile_NewCosmetics}" Command="{Binding MenuCommand}" CommandParameter="Athena_NewCosmetics" Click="OnAthenaNewCosmeticsClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{DynamicResource Menu_Versioning}" Command="{Binding MenuCommand}" CommandParameter="Help_Releases" />
            <MenuItem Header="テスト" IsEnabled="{Binding Status.IsReady}">
                <MenuItem Header="All Cosmetics" Command="{Binding MenuCommand}" CommandParameter="Athena_AllCosmetics" Click="OnAthenaAllCosmeticsClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>

                <MenuItem Header="New Cosmetics" Command="{Binding MenuCommand}" CommandParameter="Athena_NewCosmetics" Click="OnAthenaNewCosmeticsClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>

                <MenuItem Header="New Cosmetics (With Paks)" Command="{Binding MenuCommand}" CommandParameter="Athena_NewCosmetics_WithPaks" Click="OnAthenaNewCosmeticsWithPaksClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>

                <MenuItem Header="Custom Cosmetics (by Id)" Command="{Binding MenuCommand}" CommandParameter="Athena_Custom_ById" Click="OnAthenaCustomByIdClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SaveIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>

                <MenuItem Header="Pak Cosmetics" Command="{Binding MenuCommand}" CommandParameter="Athena_PakCosmetics" Click="OnAthenaPakCosmeticsClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource ExtractIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>

                <MenuItem Header="Paks Bulk" Command="{Binding MenuCommand}" CommandParameter="Athena_Paks_Bulk" Click="OnAthenaPaksBulkClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource ExtractIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>

                <Separator />

                <MenuItem Header="Back" Command="{Binding MenuCommand}" CommandParameter="Athena_Back" Click="OnAthenaBackClick">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource BackspaceIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{DynamicResource Menu_Settings}" Command="{Binding MenuCommand}" CommandParameter="Settings" />
            <MenuItem Header="{DynamicResource Menu_Help}" >
                <MenuItem Header="寄付 (英語公式)" Command="{Binding MenuCommand}" CommandParameter="Help_Donate">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource GiftIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="寄付 (JP)" Command="{Binding MenuCommand}" CommandParameter="Help_Donate_JP">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource GiftIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="バグ報告 (英語公式)" Command="{Binding MenuCommand}" CommandParameter="Help_BugsReport">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource BugIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="バグ報告 (JP)" Command="{Binding MenuCommand}" CommandParameter="Help_BugsReport_JP">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource BugIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Discordサーバー (英語公式)" Command="{Binding MenuCommand}" CommandParameter="Help_Discord">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource DiscordIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Discordサーバー (JP)" Command="{Binding MenuCommand}" CommandParameter="Help_Discord_JP">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource DiscordIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="FModelについて" Command="{Binding MenuCommand}" CommandParameter="Help_About">
                    <MenuItem.Icon>
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                            </Canvas>
                        </Viewbox>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{DynamicResource Menu_NewExplorer}" IsCheckable="True" x:Name="NewExplorerMenuItem" />
        </Menu>

        <Grid x:Name="RootGrid" Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MinWidth="400" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <GroupBox Grid.Column="0" adonisExtensions:LayerExtension.Layer="2"
                      Padding="{adonisUi:Space 0}" Background="Transparent">
                <TabControl x:Name="LeftTabControl" SelectionChanged="OnTabItemChange">
                    <TabItem Style="{StaticResource TabItemFillSpace}" Header="{DynamicResource Tab_Archives}">
                        <DockPanel>
                            <Grid DockPanel.Dock="Top">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="5" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="10" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="{DynamicResource Label_LoadingMode}" VerticalAlignment="Center" />
                                <ComboBox Grid.Row="0" Grid.Column="2" ItemsSource="{Binding LoadingModes.Modes}" IsEnabled="{Binding Status.IsReady}"
                                          SelectedItem="{Binding LoadingMode, Source={x:Static settings:UserSettings.Default}, Mode=TwoWay}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Converter={x:Static converters:EnumToStringConverter.Instance}}" />
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>

                                <Button Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" Content="{DynamicResource Button_Load}"
                                        Command="{Binding LoadingModes.LoadCommand}" IsEnabled="{Binding Status.IsReady}"
                                        CommandParameter="{Binding SelectedItems, ElementName=DirectoryFilesListBox}" />
                            </Grid>
                            <Grid DockPanel.Dock="Top">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <Separator Grid.Row="0" Style="{StaticResource CustomSeparator}" Tag="{DynamicResource Separator_ArchivesList}" />
                                <ListBox Grid.Row="1" x:Name="DirectoryFilesListBox" Style="{StaticResource DirectoryFilesListBox}" MouseDoubleClick="OnMouseDoubleClick" />
                                <Separator Grid.Row="2" Style="{StaticResource CustomSeparator}" Tag="{DynamicResource Separator_SelectedArchiveInfo}" />
                                <StackPanel Grid.Row="3" Orientation="Vertical" Margin="0 0 0 5">
                                    <Grid HorizontalAlignment="Stretch">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding SelectedItem.MountPoint, ElementName=DirectoryFilesListBox, FallbackValue='/', Converter={x:Static converters:TrimRightToLeftConverter.Instance}, ConverterParameter=275}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                        <TextBlock Grid.Row="0" Grid.Column="1" Text="{DynamicResource Label_MountPoint}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding SelectedItem.FileCount, ElementName=DirectoryFilesListBox, FallbackValue='0', StringFormat={}{0} Files}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{DynamicResource Label_FileCount}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                        <TextBlock Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Text" Value="{DynamicResource Label_Decrypted}" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedItem.IsEncrypted, ElementName=DirectoryFilesListBox}" Value="True">
                                                            <Setter Property="Text" Value="{DynamicResource Label_Encrypted}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                        <TextBlock Grid.Row="2" Grid.Column="1" Text="{DynamicResource Label_EncryptedStatus}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                        <TextBlock Grid.Row="3" Grid.Column="0" Text="{Binding SelectedItem.Guid, ElementName=DirectoryFilesListBox, FallbackValue='00000000000000000000000000000000'}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                        <TextBlock Grid.Row="3" Grid.Column="1" Text="{DynamicResource Label_Guid}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                    </Grid>
                                </StackPanel>
                            </Grid>
                        </DockPanel>
                    </TabItem>
                    <TabItem Style="{StaticResource TabItemFillSpace}" Header="{DynamicResource Tab_Folders}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="5" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Orientation="Horizontal">
                                    <Image Source="/FModel;component/Resources/label.png"
                                           Width="16" Height="16" HorizontalAlignment="Center" Margin="0 0 3.5 0" />
                                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"><Run Text="'" /><Run Text="{Binding SelectedItem.Header, ElementName=AssetsFolderName, FallbackValue='None', Mode=OneWay}" /><Run Text="'" /><Run Text="{DynamicResource Label_FolderContentInfo_Contains}" /><Run Text="{Binding SelectedItem.FoldersView.Count, ElementName=AssetsFolderName, FallbackValue='0', Mode=OneWay}" /><Run Text="{DynamicResource Label_FolderContentInfo_FoldersAnd}" /><Run Text="{Binding SelectedItem.AssetsList.Assets.Count, ElementName=AssetsFolderName, FallbackValue='0', Mode=OneWay}" /><Run Text="{DynamicResource Label_FolderContentInfo_Files}" /></TextBlock>
                                </StackPanel>
                                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button Style="{DynamicResource {x:Static adonisUi:Styles.ToolbarButton}}" ToolTip="Bring Selected Folder To View" Padding="4"
                                            Command="{Binding MenuCommand}" CommandParameter="{Binding SelectedItem, ElementName=AssetsFolderName}">
                                        <Viewbox Width="16" Height="16" HorizontalAlignment="Center">
                                            <Canvas Width="24" Height="24">
                                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource LocateMeIcon}" />
                                            </Canvas>
                                        </Viewbox>
                                    </Button>
                                    <Button Style="{DynamicResource {x:Static adonisUi:Styles.ToolbarButton}}" ToolTip="Collapse All" Padding="4"
                                            Command="{Binding MenuCommand}" CommandParameter="ToolBox_Collapse_All">
                                        <Viewbox Width="16" Height="16" HorizontalAlignment="Center">
                                            <Canvas Width="24" Height="24">
                                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource FoldIcon}"/>
                                            </Canvas>
                                        </Viewbox>
                                    </Button>
                                </StackPanel>
                            </Grid>

                            <Separator Grid.Row="1" Style="{StaticResource CustomSeparator}" Margin="0" />
                            <TreeView Grid.Row="2" x:Name="AssetsFolderName" Style="{StaticResource AssetsFolderTreeView}" PreviewMouseDoubleClick="OnAssetsTreeMouseDoubleClick" SelectedItemChanged="OnAssetsFolderSelectedItemChanged">
                                <TreeView.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="{DynamicResource Ctx_SaveUasset}" Click="OnFolderExportClick">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource ExportIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="{DynamicResource Ctx_SaveJson}" Click="OnFolderSaveClick">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SaveIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="{DynamicResource Ctx_SaveDecompiled}" Click="OnFolderSaveDecompiled">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SaveIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="{DynamicResource Ctx_SaveTexture}" Click="OnFolderTextureClick">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource TextureIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="{DynamicResource Ctx_SaveModel}" Click="OnFolderModelClick">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource ModelIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="{DynamicResource Ctx_SaveAnim}" Click="OnFolderAnimationClick">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource AnimationIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <Separator />
                                        <MenuItem Header="{DynamicResource Ctx_AddToFavorites}" Click="OnFavoriteDirectoryClick">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource DirectoriesAddIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="{DynamicResource Ctx_CopyPath}" Click="OnCopyDirectoryPathClick">
                                            <MenuItem.Icon>
                                                <Viewbox Width="16" Height="16">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource CopyIcon}" />
                                                    </Canvas>
                                                </Viewbox>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                    </ContextMenu>
                                </TreeView.ContextMenu>
                            </TreeView>
                            <Separator Grid.Row="3" Style="{StaticResource CustomSeparator}" Tag="{DynamicResource Separator_FolderInfo}" />
                            <StackPanel Grid.Row="4" Orientation="Vertical" Margin="0 0 0 5">
                                <Grid HorizontalAlignment="Stretch">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding SelectedItem.AssetsList.Assets.Count, ElementName=AssetsFolderName, FallbackValue=0}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{DynamicResource Label_FolderFileCount}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding SelectedItem.FoldersView.Count, ElementName=AssetsFolderName, FallbackValue=0}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{DynamicResource Label_FolderFolderCount}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding SelectedItem.Archive, ElementName=AssetsFolderName, FallbackValue='None'}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                    <TextBlock Grid.Row="2" Grid.Column="1" Text="{DynamicResource Label_ContainerArchive}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="{Binding SelectedItem.MountPoint, ElementName=AssetsFolderName, FallbackValue='/', Converter={x:Static converters:TrimRightToLeftConverter.Instance}, ConverterParameter=275}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                    <TextBlock Grid.Row="3" Grid.Column="1" Text="{DynamicResource Label_ArchiveMountPoint}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                    <TextBlock Grid.Row="4" Grid.Column="0" Text="{Binding SelectedItem.Version, ElementName=AssetsFolderName, FallbackValue='VER_UE4_LATEST', Converter={x:Static converters:TrimRightToLeftConverter.Instance}, ConverterParameter=275}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                    <TextBlock Grid.Row="4" Grid.Column="1" Text="{DynamicResource Label_ArchiveVersion}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </TabItem>
                    <TabItem Style="{StaticResource TabItemFillSpace}"
                             Header="{Binding SelectedItem.AssetsList.Assets.Count, FallbackValue=0, ElementName=AssetsFolderName}"
                             HeaderStringFormat="{}{0} 個のファイル">
                        <DockPanel>
                            <Grid DockPanel.Dock="Top" ZIndex="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="0" ZIndex="1" HorizontalAlignment="Left" Margin="5 2 0 0">
                                    <Viewbox Width="16" Height="16">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SearchIcon}" />
                                        </Canvas>
                                    </Viewbox>
                                </Grid>
                                <TextBox Grid.Column="0" Grid.ColumnSpan="2" x:Name="AssetsSearchName" AcceptsTab="False" AcceptsReturn="False"
                                         Padding="25 0 0 0" HorizontalAlignment="Stretch" TextChanged="OnFilterTextChanged"
                                         adonisExtensions:WatermarkExtension.Watermark="{DynamicResource Search_Watermark}" />
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <Button ToolTip="Clear Search Filter" Padding="5" Style="{DynamicResource {x:Static adonisUi:Styles.ToolbarButton}}" Click="OnDeleteSearchClick">
                                        <Viewbox Width="16" Height="16" HorizontalAlignment="Center">
                                            <Canvas Width="24" Height="24">
                                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource BackspaceIcon}"/>
                                            </Canvas>
                                        </Viewbox>
                                    </Button>
                                </StackPanel>
                            </Grid>
                            <Grid DockPanel.Dock="Top">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <controls:Breadcrumb Grid.Row="0" MaxWidth="{Binding ActualWidth, ElementName=AssetsSearchName}" HorizontalAlignment="Left" Margin="0 5 0 5"
                                                     DataContext="{Binding SelectedItem.PathAtThisPoint, ElementName=AssetsFolderName, FallbackValue='No/Directory/Detected/In/Folder'}"/>

                                <ListBox Grid.Row="1" x:Name="AssetsListName" Style="{StaticResource AssetsListBox}" PreviewMouseDoubleClick="OnAssetsListMouseDoubleClick" PreviewKeyDown="OnPreviewKeyDown">
                                    <ListBox.ContextMenu>
                                        <ContextMenu DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}">
                                            <MenuItem Header="{DynamicResource Ctx_OpenNewTab}" Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Extract_New_Tab" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource ExtractIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_ShowMetadata}" Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Show_Metadata" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_CompareFiles}"
                                                      IsEnabled="{Binding DiffGameDirectory, Source={x:Static settings:UserSettings.Default}, Converter={x:Static converters:StringNotEmptyToBoolConverter.Instance}}"
                                                      Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_View_Diff" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16"
                                                             Height="16">
                                                        <Canvas Width="24"
                                                                Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}"
                                                                  Data="{StaticResource DiffIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_OpenReferenceViewer}" Click="OnShowReferenceChainClick">
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                           <MenuItem Header="{DynamicResource Ctx_PlayVideo}" Click="OnPlayVideoClick">
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="M8,5.14V19.14L19,12.14L8,5.14Z" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                                <MenuItem.Style>
                                                    <Style TargetType="MenuItem" BasedOn="{StaticResource {x:Type MenuItem}}">
                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SelectedItem.Extension}" Value="mp4">
                                                                <Setter Property="Visibility" Value="Visible" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </MenuItem.Style>
                                            </MenuItem>
                                            <Separator />
                                            <MenuItem Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.Header>
                                                    <TextBlock>
                                                        <Run Text="{DynamicResource Ctx_SaveAsFormat_Prefix}" /><Run Text="{Binding DataContext.SelectedItem.Extension, RelativeSource={RelativeSource AncestorType=ContextMenu}, FallbackValue='Data', Mode=OneWay}" /><Run Text="{DynamicResource Ctx_SaveAsFormat_Suffix}" />
                                                    </TextBlock>
                                                </MenuItem.Header>
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Export_Data" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource ExportIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_SaveJson}" Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Save_Properties" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SaveIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_SaveTexture}" Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Save_Textures" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource TextureIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_SaveModel}" Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Save_Models" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource ModelIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_SaveAnim}" Command="{Binding DataContext.RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Save_Animations" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource AnimationIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="{DynamicResource Ctx_SaveSound}" Command="{Binding DataContext.SaveSoundCommand}" CommandParameter="{Binding SelectedItems}">
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource AudioIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <Separator />
                                            <MenuItem Header="{DynamicResource Ctx_Copy}">
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource CopyIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                                <MenuItem Header="{DynamicResource Ctx_CopyPath}" Command="{Binding DataContext.CopyCommand}">
                                                    <MenuItem.CommandParameter>
                                                        <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                            <Binding Source="File_Path" />
                                                            <Binding Path="SelectedItems" />
                                                        </MultiBinding>
                                                    </MenuItem.CommandParameter>
                                                </MenuItem>
                                                <MenuItem Header="{DynamicResource Ctx_CopyName}" Command="{Binding DataContext.CopyCommand}">
                                                    <MenuItem.CommandParameter>
                                                        <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                            <Binding Source="File_Name" />
                                                            <Binding Path="SelectedItems" />
                                                        </MultiBinding>
                                                    </MenuItem.CommandParameter>
                                                </MenuItem>
                                                <MenuItem Header="{DynamicResource Ctx_CopyFolderPath}" Command="{Binding DataContext.CopyCommand}">
                                                    <MenuItem.CommandParameter>
                                                        <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                            <Binding Source="Directory_Path" />
                                                            <Binding Path="SelectedItems" />
                                                        </MultiBinding>
                                                    </MenuItem.CommandParameter>
                                                </MenuItem>
                                                <MenuItem Header="{DynamicResource Ctx_CopyPathNoExt}" Command="{Binding DataContext.CopyCommand}">
                                                    <MenuItem.CommandParameter>
                                                        <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                            <Binding Source="File_Path_No_Extension" />
                                                            <Binding Path="SelectedItems" />
                                                        </MultiBinding>
                                                    </MenuItem.CommandParameter>
                                                </MenuItem>
                                                <MenuItem Header="{DynamicResource Ctx_CopyFolderPathNoExt}" Command="{Binding DataContext.CopyCommand}">
                                                    <MenuItem.CommandParameter>
                                                        <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                            <Binding Source="File_Name_No_Extension" />
                                                            <Binding Path="SelectedItems" />
                                                        </MultiBinding>
                                                    </MenuItem.CommandParameter>
                                                </MenuItem>
                                            </MenuItem>
                                        </ContextMenu>
                                    </ListBox.ContextMenu>
                                </ListBox>
                                <Separator Grid.Row="2" Style="{StaticResource CustomSeparator}" Tag="{DynamicResource Separator_FolderInfo}" />
                                <StackPanel Grid.Row="3" Orientation="Vertical" Margin="0 0 0 5">
                                    <Grid HorizontalAlignment="Stretch">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding SelectedItem.Offset, ElementName=AssetsListName, FallbackValue=0, StringFormat='{}0x{0:X}'}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                        <TextBlock Grid.Row="0" Grid.Column="1" Text="Offset" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding SelectedItem.Size, ElementName=AssetsListName, FallbackValue=0, Converter={x:Static converters:SizeToStringConverter.Instance}}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{DynamicResource Label_FileCount}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding SelectedItem.CompressionMethod, ElementName=AssetsListName, FallbackValue='不明'}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                        <TextBlock Grid.Row="2" Grid.Column="1" Text="Compression" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                        <TextBlock Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Text" Value="{DynamicResource Label_Decrypted}" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedItem.IsEncrypted, ElementName=AssetsListName}" Value="True">
                                                            <Setter Property="Text" Value="{DynamicResource Label_Encrypted}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                        <TextBlock Grid.Row="3" Grid.Column="1" Text="{DynamicResource Label_EncryptedStatus}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                        <TextBlock Grid.Row="4" Grid.Column="0" Text="{Binding SelectedItem.Vfs.Name, ElementName=AssetsListName, FallbackValue='なし'}" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                        <TextBlock Grid.Row="4" Grid.Column="1" Text="{DynamicResource Label_ContainerArchive}" VerticalAlignment="Center" HorizontalAlignment="Right" />
                                    </Grid>
                                </StackPanel>
                            </Grid>
                        </DockPanel>
                    </TabItem>
                    <TabItem Style="{StaticResource TabItemFillSpace}" Header="自動化">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="10">
                                <TextBlock Text="自動化 (Automation)" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>

                                <!-- Step 1 -->
                                <Border Background="{DynamicResource {x:Static adonisUi:Brushes.Layer1BackgroundBrush}}" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                                    <StackPanel>
                                        <TextBlock Text="1. 対象を選択 (Select Targets)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                <TextBlock Text="ファイル名 (正規表現可):" Opacity="0.7" Margin="0,0,0,2"/>
                                                <TextBox x:Name="BatchSearchBox" adonisExtensions:WatermarkExtension.Watermark="例: .*_T$"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="1" MinWidth="150">
                                                <TextBlock Text="アセットクラス:" Opacity="0.7" Margin="0,0,0,2"/>
                                                <ComboBox x:Name="BatchClassComboBox" SelectedIndex="0">
                                                    <ComboBoxItem Content="すべて (All)" />
                                                    <ComboBoxItem Content="Texture2D" />
                                                    <ComboBoxItem Content="StaticMesh" />
                                                    <ComboBoxItem Content="SoundWave" />
                                                    <ComboBoxItem Content="MaterialInstanceConstant" />
                                                </ComboBox>
                                            </StackPanel>
                                        </Grid>
                                        <CheckBox x:Name="BatchIgnoreCaseCheckBox" Content="大文字・小文字を区別しない" IsChecked="True" Margin="0,5,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- Step 2 -->
                                <Border Background="{DynamicResource {x:Static adonisUi:Brushes.Layer1BackgroundBrush}}" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                                    <StackPanel>
                                        <TextBlock Text="2. メインアクション (Primary Action)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                        <WrapPanel Orientation="Horizontal">
                                            <RadioButton x:Name="BatchActionExport" GroupName="BatchPrimaryAction" Content="エクスポート (.uasset)" IsChecked="True" Margin="0,5,15,5"/>
                                            <RadioButton x:Name="BatchActionJson" GroupName="BatchPrimaryAction" Content="プロパティ保存 (.json)" Margin="0,5,15,5"/>
                                            <RadioButton x:Name="BatchActionTexture" GroupName="BatchPrimaryAction" Content="テクスチャ保存 (.png)" Margin="0,5,15,5"/>
                                        </WrapPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Step 3 -->
                                <Border Background="{DynamicResource {x:Static adonisUi:Brushes.Layer1BackgroundBrush}}" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                                    <StackPanel>
                                        <TextBlock Text="3. ポストプロセス (Post Process)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                        <WrapPanel Orientation="Horizontal">
                                            <RadioButton x:Name="BatchPostActionNone" GroupName="BatchPostAction" Content="なし (None)" IsChecked="True" Margin="0,5,15,5"/>
                                            <RadioButton x:Name="BatchPostActionNetwork" GroupName="BatchPostAction" Content="ネットワークリクエスト (Network Request)" Margin="0,5,15,5"/>
                                            <RadioButton x:Name="BatchPostActionScript" GroupName="BatchPostAction" Content="外部プログラム実行 (Run External Program)" Margin="0,5,15,5"/>
                                        </WrapPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Step 4 (Settings) -->
                                <Border Background="{DynamicResource {x:Static adonisUi:Brushes.Layer1BackgroundBrush}}" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsChecked, ElementName=BatchPostActionNetwork}" Value="True">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding IsChecked, ElementName=BatchPostActionScript}" Value="True">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <StackPanel>
                                        <TextBlock Text="4. 詳細設定 (Settings)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                        
                                        <!-- Network Settings -->
                                        <StackPanel Visibility="{Binding IsChecked, ElementName=BatchPostActionNetwork, Converter={StaticResource BoolToVisibilityConverter}}">
                                            <Grid Margin="0,0,0,5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <ComboBox x:Name="NetworkMethodComboBox" SelectedIndex="1" Width="80" Margin="0,0,5,0">
                                                    <ComboBoxItem Content="GET" />
                                                    <ComboBoxItem Content="POST" />
                                                    <ComboBoxItem Content="PUT" />
                                                    <ComboBoxItem Content="DELETE" />
                                                </ComboBox>
                                                <TextBox Grid.Column="1" x:Name="NetworkUrlBox" adonisExtensions:WatermarkExtension.Watermark="URL (https://example.com/api)"/>
                                            </Grid>

                                            <TextBlock Text="Payload Type:" Opacity="0.7" Margin="0,5,0,2"/>
                                            <ComboBox x:Name="NetworkPayloadTypeComboBox" SelectedIndex="0" Margin="0,0,0,5">
                                                <ComboBoxItem Content="Text / JSON" />
                                                <ComboBoxItem Content="File Content (Binary)" />
                                                <ComboBoxItem Content="Multipart Form Data" />
                                            </ComboBox>

                                            <TextBlock Text="Headers (Key: Value):" Opacity="0.7" Margin="0,5,0,2"/>
                                            <TextBox x:Name="NetworkHeadersBox" Height="60" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" FontFamily="Consolas" 
                                                     adonisExtensions:WatermarkExtension.Watermark="Content-Type: application/json&#x0a;Authorization: Bearer token"/>

                                            <TextBlock Text="Body (Text/JSON) or Form Key (Multipart):" Opacity="0.7" Margin="0,5,0,2"/>
                                            <TextBox x:Name="NetworkRequestBodyBox" Height="80" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" FontFamily="Consolas"/>
                                        </StackPanel>

                                        <!-- Script Settings -->
                                        <StackPanel Visibility="{Binding IsChecked, ElementName=BatchPostActionScript, Converter={StaticResource BoolToVisibilityConverter}}">
                                            <TextBlock Text="Program Path:" Opacity="0.7" Margin="0,0,0,2"/>
                                            <TextBox x:Name="ScriptPathBox" Margin="0,0,0,5" adonisExtensions:WatermarkExtension.Watermark="C:\Path\To\Script.bat or python.exe"/>
                                            
                                            <TextBlock Text="Arguments:" Opacity="0.7" Margin="0,5,0,2"/>
                                            <TextBox x:Name="ScriptArgsBox" Margin="0,0,0,5" adonisExtensions:WatermarkExtension.Watermark="&quot;{FilePath}&quot; --name &quot;{FileName}&quot;"/>
                                            
                                            <TextBlock Text="Variables: {FilePath}, {FileName}, {FileDir}, {NameWithoutExt}" FontSize="10" Opacity="0.6" Margin="0,0,0,5"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <Button Content="実行 (Execute)" Height="40" FontSize="14" FontWeight="Bold" Click="OnBatchExecuteClick" IsEnabled="{Binding Status.IsReady}"/>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </GroupBox>

            <GridSplitter Grid.Column="1" ResizeDirection="Columns" Width="4" VerticalAlignment="Stretch"
                          ResizeBehavior="PreviousAndNext" MouseDoubleClick="OnGridSplitterDoubleClick"
                          Background="{DynamicResource {x:Static adonisUi:Brushes.Layer0BackgroundBrush}}" />

            <GroupBox Grid.Column="2" adonisExtensions:LayerExtension.Layer="2"
                      Padding="{adonisUi:Space 0}" Background="Transparent">
                <Grid Margin="0 0 3 0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <!-- NEW エクスプローラー用 -->
                        <RowDefinition Height="*" />
                        <!-- タブ -->
                        <RowDefinition Height="Auto" />
                        <!-- ログ欄 -->
                    </Grid.RowDefinitions>
                    <TabControl Grid.Row="1"
                                x:Name="TabControlName"
                                Style="{StaticResource GameFilesTabControl}" />

                    <!-- NEW エクスプローラー UI -->
                    <Grid Grid.Row="1" x:Name="NewExplorerGrid" Visibility="{Binding IsChecked, ElementName=NewExplorerMenuItem, Converter={StaticResource BoolToVisibilityConverter}}" Background="{DynamicResource {x:Static adonisUi:Brushes.Layer0BackgroundBrush}}">
                        <Grid.Style>
                            <Style TargetType="Grid">
                                <Setter Property="DataContext" Value="{Binding CUE4Parse.AssetsFolder}" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedItem, ElementName=AssetsFolderName, Converter={x:Static converters:IsNullToBoolReversedConverter.Instance}}" Value="True">
                                        <Setter Property="DataContext" Value="{Binding SelectedItem, ElementName=AssetsFolderName}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0" Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid Grid.Column="0" ZIndex="1" HorizontalAlignment="Left" Margin="5 2 0 0">
                                <Viewbox Width="16" Height="16">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource SearchIcon}" />
                                    </Canvas>
                                </Viewbox>
                            </Grid>
                            <TextBox Grid.Column="0" x:Name="NewExplorerSearchBox" AcceptsTab="False" AcceptsReturn="False"
                                     Padding="25 0 0 0" HorizontalAlignment="Stretch" TextChanged="OnNewExplorerFilterTextChanged"
                                     adonisExtensions:WatermarkExtension.Watermark="{DynamicResource Search_Watermark}" />
                            <Button Grid.Column="1" ToolTip="Clear Search Filter" Padding="5" Style="{DynamicResource {x:Static adonisUi:Styles.ToolbarButton}}" Click="OnNewExplorerDeleteSearchClick">
                                <Viewbox Width="16" Height="16" HorizontalAlignment="Center">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource BackspaceIcon}"/>
                                    </Canvas>
                                </Viewbox>
                            </Button>
                            <ComboBox Grid.Column="2" x:Name="NewExplorerClassFilter" Margin="5 0 0 0" MinWidth="120"
                                      SelectionChanged="OnNewExplorerClassFilterChanged" SelectedIndex="0">
                                <ComboBoxItem Content="All Classes" />
                                <ComboBoxItem Content="Texture2D" />
                                <ComboBoxItem Content="StaticMesh" />
                                <ComboBoxItem Content="SkeletalMesh" />
                                <ComboBoxItem Content="Material" />
                                <ComboBoxItem Content="MaterialInstance" />
                                <ComboBoxItem Content="SoundWave" />
                                <ComboBoxItem Content="Blueprint" />
                                <ComboBoxItem Content="DataTable" />
                                <ComboBoxItem Content="StringTable" />
                            </ComboBox>
                        </Grid>

                        <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                            <StackPanel>
                                <ListBox x:Name="NewExplorerListBox"
                                         ItemsSource="{Binding FoldersView, IsAsync=True}"
                                         MouseDoubleClick="OnNewExplorerListMouseDoubleClick"
                                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                         ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                         Background="Transparent" BorderThickness="0"
                                         Padding="5">
                                    <ListBox.Style>
                                        <Style TargetType="ListBox" BasedOn="{StaticResource {x:Type ListBox}}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListBox">
                                                        <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <ItemsPresenter />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ListBox.Style>
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel Orientation="Horizontal" IsItemsHost="True" />
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Width="160" Height="190" Margin="5" CornerRadius="4"
                                                    Background="{DynamicResource {x:Static adonisUi:Brushes.Layer1BackgroundBrush}}"
                                                    BorderBrush="{DynamicResource {x:Static adonisUi:Brushes.Layer3BorderBrush}}"
                                                    BorderThickness="1">
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>

                                                    <Viewbox Grid.Row="0" Margin="20">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentBrush}}" Data="{StaticResource FolderIcon}" />
                                                        </Canvas>
                                                    </Viewbox>

                                                    <Border Grid.Row="1" Background="{DynamicResource {x:Static adonisUi:Brushes.Layer2BackgroundBrush}}"
                                                            CornerRadius="0,0,4,4" Padding="5">
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding Header}" FontWeight="SemiBold" TextTrimming="CharacterEllipsis"
                                                                       ToolTip="{Binding Header}" HorizontalAlignment="Center" Margin="0,0,0,2"/>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock Grid.Column="0" Text="{Binding AssetsList.Assets.Count, StringFormat='{}{0} Items'}" FontSize="10" Opacity="0.7" />
                                                                <TextBlock Grid.Column="1" Text="{Binding FoldersView.Count, StringFormat='{}{0} Folders'}" FontSize="10" Opacity="0.7" HorizontalAlignment="Right" />
                                                            </Grid>
                                                        </StackPanel>
                                                    </Border>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <ListBox x:Name="NewExplorerFilesListBox"
                                         ItemsSource="{Binding AssetsList.AssetsView, IsAsync=True}"
                                         MouseDoubleClick="OnNewExplorerFileMouseDoubleClick"
                                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                         ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                         Background="Transparent" BorderThickness="0"
                                         Padding="5">
                                    <ListBox.ContextMenu>
                                        <ContextMenu DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}">
                                            <MenuItem Header="{DynamicResource Ctx_ShowMetadata}" Command="{Binding Source={x:Static services:ApplicationService.ApplicationView}, Path=RightClickMenuCommand}">
                                                <MenuItem.CommandParameter>
                                                    <MultiBinding Converter="{x:Static converters:MultiParameterConverter.Instance}">
                                                        <Binding Source="Assets_Show_Metadata" />
                                                        <Binding Path="SelectedItems" />
                                                    </MultiBinding>
                                                </MenuItem.CommandParameter>
                                                <MenuItem.Icon>
                                                    <Viewbox Width="16" Height="16">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource InfoIcon}" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                        </ContextMenu>
                                    </ListBox.ContextMenu>
                                    <ListBox.Style>
                                        <Style TargetType="ListBox" BasedOn="{StaticResource {x:Type ListBox}}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListBox">
                                                        <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <ItemsPresenter />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ListBox.Style>
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel Orientation="Horizontal" IsItemsHost="True" />
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Width="120" Height="140" Margin="5" CornerRadius="4"
                                                    Background="{DynamicResource {x:Static adonisUi:Brushes.Layer1BackgroundBrush}}"
                                                    BorderBrush="{DynamicResource {x:Static adonisUi:Brushes.Layer3BorderBrush}}"
                                                    BorderThickness="1">
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>

                                                    <Image x:Name="ThumbnailImage" Grid.Row="0" Margin="10" Stretch="Uniform"
                                                           controls:FileIconLoader.GameFile="{Binding}"
                                                           Visibility="Collapsed"/>

                                                    <Viewbox Grid.Row="0" Margin="20">
                                                        <Viewbox.Style>
                                                            <Style TargetType="Viewbox">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding Visibility, ElementName=ThumbnailImage}" Value="Visible">
                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Viewbox.Style>
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource NoteIcon}" />
                                                        </Canvas>
                                                    </Viewbox>

                                                    <Border Grid.Row="1" Background="{DynamicResource {x:Static adonisUi:Brushes.Layer2BackgroundBrush}}"
                                                            CornerRadius="0,0,4,4" Padding="5">
                                                        <StackPanel>
                                                            <TextBlock controls:HighlightText.Text="{Binding Name}"
                                                                       controls:HighlightText.Highlight="{Binding Text, ElementName=NewExplorerSearchBox}"
                                                                       controls:HighlightText.HighlightBrush="{DynamicResource {x:Static adonisUi:Brushes.AccentBrush}}"
                                                                       FontWeight="SemiBold" TextTrimming="CharacterEllipsis"
                                                                       ToolTip="{Binding Name}" HorizontalAlignment="Center" Margin="0,0,0,2"/>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock Grid.Column="0" Text="{Binding Size, Converter={x:Static converters:SizeToStringConverter.Instance}}" FontSize="10" Opacity="0.7" />
                                                                <TextBlock Grid.Column="1" Text="{Binding Extension}" FontSize="10" Opacity="0.7" HorizontalAlignment="Right" />
                                                            </Grid>
                                                        </StackPanel>
                                                    </Border>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>

                    <Expander Grid.Row="2" Margin="0 5 0 5" ExpandDirection="Down"
                              IsExpanded="{Binding IsLoggerExpanded, Source={x:Static settings:UserSettings.Default}}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="2" />
                                <ColumnDefinition Width="24" />
                            </Grid.ColumnDefinitions>

                            <controls:CustomRichTextBox x:Name="LogRtbName" Style="{StaticResource CustomRichTextBox}" Grid.Column="0" Grid.ColumnSpan="3" />
                            <StackPanel Grid.Column="2" Orientation="Vertical" VerticalAlignment="Bottom" Margin="-5 -5 5 5">
                                <Button Style="{DynamicResource {x:Static adonisUi:Styles.ToolbarButton}}" ToolTip="Open Output Folder" Padding="0,4,0,4"
                                        Command="{Binding MenuCommand}" CommandParameter="ToolBox_Open_Output_Directory">
                                    <Viewbox Width="16" Height="16" HorizontalAlignment="Center">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource FolderIcon}" />
                                        </Canvas>
                                    </Viewbox>
                                </Button>
                                <Button Style="{DynamicResource {x:Static adonisUi:Styles.ToolbarButton}}" ToolTip="Clear Logs" Padding="0,4,0,4"
                                        Command="{Binding MenuCommand}" CommandParameter="ToolBox_Clear_Logs">
                                    <Viewbox Width="16" Height="16" HorizontalAlignment="Center">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.ForegroundBrush}}" Data="{StaticResource TrashIcon}"/>
                                        </Canvas>
                                    </Viewbox>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Expander>
                </Grid>
            </GroupBox>
        </Grid>

        <StatusBar Grid.Row="3" MinHeight="28" MaxHeight="28"
                   adonisExtensions:LayerExtension.Layer="3">
            <StatusBar.Style>
                <Style TargetType="{x:Type StatusBar}" BasedOn="{StaticResource {x:Type StatusBar}}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Ready}">
                            <Setter Property="Background" Value="{DynamicResource {x:Static adonisUi:Brushes.AccentBrush}}" />
                            <Setter Property="Foreground" Value="White" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Completed}">
                            <Setter Property="Background" Value="{DynamicResource {x:Static adonisUi:Brushes.AccentBrush}}" />
                            <Setter Property="Foreground" Value="White" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Loading}">
                            <Setter Property="Background" Value="{DynamicResource {x:Static adonisUi:Brushes.AlertBrush}}" />
                            <Setter Property="Foreground" Value="White" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Stopping}">
                            <Setter Property="Background" Value="{DynamicResource {x:Static adonisUi:Brushes.AlertBrush}}" />
                            <Setter Property="Foreground" Value="White" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Stopped}">
                            <Setter Property="Background" Value="{DynamicResource {x:Static adonisUi:Brushes.ErrorBrush}}" />
                            <Setter Property="Foreground" Value="White" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Failed}">
                            <Setter Property="Background" Value="{DynamicResource {x:Static adonisUi:Brushes.ErrorBrush}}" />
                            <Setter Property="Foreground" Value="White" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding StatusChangeAttempted, Source={x:Static services:ApplicationService.ThreadWorkerView}}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard Duration="0:0:0.8">
                                        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(StatusBar.Background).(SolidColorBrush.Color)" FillBehavior="Stop">
                                            <ColorAnimationUsingKeyFrames.KeyFrames>
                                                <DiscreteColorKeyFrame KeyTime="0:0:0" Value="#CE5555" />
                                                <DiscreteColorKeyFrame KeyTime="0:0:0.2" Value="#C22B2B" />
                                                <DiscreteColorKeyFrame KeyTime="0:0:0.4" Value="#CE5555" />
                                                <DiscreteColorKeyFrame KeyTime="0:0:0.6" Value="#C22B2B" />
                                                <DiscreteColorKeyFrame KeyTime="0:0:0.8" Value="#CE5555" />
                                            </ColorAnimationUsingKeyFrames.KeyFrames>
                                        </ColorAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding OperationCancelled, Source={x:Static services:ApplicationService.ThreadWorkerView}}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard Duration="0:0:1">
                                        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(StatusBar.Background).(SolidColorBrush.Color)" FillBehavior="Stop">
                                            <ColorAnimationUsingKeyFrames.KeyFrames>
                                                <DiscreteColorKeyFrame KeyTime="0:0:0" Value="#C22B2B" />
                                                <DiscreteColorKeyFrame KeyTime="0:0:1" Value="#CE5555" />
                                            </ColorAnimationUsingKeyFrames.KeyFrames>
                                        </ColorAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </StatusBar.Style>

            <StatusBarItem Margin="5,0,0,0" >
                <TextBlock>
                    <TextBlock.Style>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="Text" Value="{Binding Status.Label}" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Loading}">
                                    <Setter Property="Text" Value="{Binding Status.Label, StringFormat='{}{0} …'}" />
                                </DataTrigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding CanBeCanceled, Source={x:Static services:ApplicationService.ThreadWorkerView}}" Value="True" />
                                        <Condition Binding="{Binding Status.Kind}" Value="{x:Static local:EStatusKind.Loading}" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Text" Value="{Binding Status.Label, StringFormat='{}{0} …    ESC を押してキャンセルします'}" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StatusBarItem>

            <StatusBarItem Margin="0 0 5 0" HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal">
                    <StatusBarItem Margin="0 0 10 0" HorizontalContentAlignment="Stretch">
                        <Viewbox Width="16" Height="16">
                            <Canvas Width="24" Height="24">
                                <Path Fill="{DynamicResource {x:Static adonisUi:Brushes.AccentForegroundBrush}}" Data="{StaticResource StatusBarIcon}" />
                            </Canvas>
                        </Viewbox>
                    </StatusBarItem>

                    <StatusBarItem Width="30" HorizontalContentAlignment="Stretch" ToolTip="Auto Open Sounds Enabled">
                        <StatusBarItem.Style>
                            <Style TargetType="StatusBarItem">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsAutoOpenSounds, Source={x:Static settings:UserSettings.Default}}" Value="False">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StatusBarItem.Style>
                        <TextBlock HorizontalAlignment="Center" FontWeight="SemiBold" Text="SND" />
                    </StatusBarItem>

                    <StatusBarItem Margin="10 0 0 0">
                        <TextBlock Text="{Binding LastUpdateCheck, Source={x:Static settings:UserSettings.Default}, Converter={x:Static converters:RelativeDateTimeConverter.Instance}, StringFormat=最終更新 : {0}}" />
                    </StatusBarItem>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</adonisControls:AdonisWindow>
